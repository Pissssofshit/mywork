<?xml version="1.0" encoding="utf-8"?>
<database name="h5yun"  shortname="h5yun"  host="mysql"  port="3306" user="yun_h5" password="yun_h5" hosts="%" title="h5yun发行管理" namespace="com.mjutech.h5yun">
	<table name="h5_cp_game" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="CP游戏" group="对接配置">
		<columns>
			<column name="game_id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_name" type="varchar(50)" nullable="false" displayName="游戏名" displayType="text" queryType="fuzzy"/>
			<column name="game_en_name" type="varchar(20)" nullable="true" default="" displayName="游戏拼音简写" displayType="text" queryType="fuzzy"/>
			<column name="game_developer" type="varchar(50)" nullable="true" default="" displayName="游戏研发商" displayType="text" queryType="fuzzy"/>
			<column name="login_url" type="varchar(255)" nullable="true" default="" displayName="游戏登陆接口地址" displayType="textarea" />
			<column name="pay_url" type="varchar(255)" nullable="true" default="" displayName="游戏充值接口地址" displayType="textarea" />
			<column name="login_key" type="varchar(100)" nullable="true" default="" displayName="登陆秘钥" displayType="text" />
			<column name="pay_key" type="varchar(100)" nullable="true" default="" displayName="充值秘钥" displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="更新时间" displayType="time" />
			<column name="operation_state" type="int(2)" nullable="true" default="1" displayName="运营状态:1正常，2下线" displayType="text" queryType="precise"/>
			<column name="game_rate" type="int(11)" nullable="true" default="1" displayName="游戏兑换比例:1元兑换多少游戏币" displayType="text" />
			<column name="login_https_url" type="varchar(255)" nullable="true" default="" displayName="游戏登陆接口:https地址" displayType="textarea" />
			<column name="entry_url" type="varchar(255)" nullable="true" default="" displayName="游戏入口地址" displayType="textarea" />
		</columns>
		<keys>
			<key type="pk">
				<column name="game_id"/>
			</key>
		</keys>
	</table>
	<table name="h5_gm_pt_appid_relation" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="游戏平台分包关联表" group="对接配置">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="platform_id" type="int(11)" nullable="false" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="game_id" type="int(11)" nullable="false" displayName="游戏id" displayType="select" queryType="precise" />
			<column name="operation_state" type="int(2)" nullable="true" default="1" displayName="运营状态:1正常，2下线" displayType="text" queryType="precise" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="更新时间" displayType="time" />
			<column name="game_plat_key" type="varchar(255)" nullable="true" default="" displayName="游戏平台key" displayType="textarea" />
			<column name="game_plat_id" type="varchar(32)" nullable="true" default="" displayName="游戏平台id" displayType="text" />
			<column name="game_entry_url" type="varchar(255)" nullable="true" default="NULL" displayName="游戏入口地址" displayType="textarea" />
			<column name="platform_ext" type="varchar(255)" nullable="true" default="" displayName="平台特殊字段" displayType="textarea" />
			<column name="game_plat_pay_key" type="varchar(255)" nullable="true" default="NULL" displayName="游戏平台支付key" displayType="textarea" />
			<column name="pay_public_key" type="text" nullable="true" displayName="支付公钥" displayType="textarea" />
			<column name="pay_private_key" type="text" nullable="true" displayName="支付私钥" displayType="textarea" />
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>

		</keys>
	</table>
	<table name="h5_gm_pt_relation" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="平台游戏配置" group="对接配置">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="platform_id" type="int(11)" nullable="false" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="game_id" type="int(11)" nullable="false" displayName="游戏id" displayType="select" queryType="precise" />
			<column name="operation_state" type="int(2)" nullable="true" default="1" displayName="运营状态:1正常，2下线" displayType="text" queryType="precise" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="更新时间" displayType="time" />
			<column name="game_plat_key" type="varchar(255)" nullable="true" default="" displayName="游戏平台key" displayType="textarea" />
			<column name="game_plat_id" type="varchar(32)" nullable="true" default="" displayName="游戏平台id" displayType="text" />
			<column name="game_entry_url" type="varchar(255)" nullable="true" default="NULL" displayName="游戏入口地址" displayType="textarea" />
			<column name="platform_ext" type="varchar(255)" nullable="true" default="" displayName="平台特殊字段" displayType="textarea" />
			<column name="game_plat_pay_key" type="varchar(255)" nullable="true" default="NULL" displayName="游戏平台支付key" displayType="textarea" />
			<column name="pay_public_key" type="text" nullable="true" displayName="支付公钥" displayType="textarea" />
			<column name="pay_private_key" type="text" nullable="true" displayName="支付私钥" displayType="textarea" />
			<column name="is_charge" type="int(2)" nullable="true" default="1" displayName="是否开启充值" />
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>

		</keys>
	</table>
	<table name="h5_yun_active" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="用户激活" group="用户" >
		<columns>
			<column name="yun_uid" type="int(11)" nullable="false" displayName="用户id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="false" default="0" displayName="游戏id" displayType="select"  queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select"  queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="first_login_time" type="int(11)" nullable="true" default="0" displayName="游戏首次激活时间" displayType="time" />
			<column name="last_login_time" type="int(11)" nullable="true" default="0" displayName="最后登陆时间" displayType="time" />
			<column name="first_pay_time" type="int(11)" nullable="true" default="0" displayName="游戏首次充值时间" displayType="time" />
			<column name="last_pay_time" type="int(11)" nullable="true" default="0" displayName="最后充值时间" displayType="time" />
			<column name="first_login_ip" type="varchar(30)" nullable="true" default="" displayName="首次登陆ip" displayType="text" />
			<column name="last_login_ip" type="varchar(30)" nullable="true" default="" displayName="最后一次登陆ip" displayType="text" />
		</columns>
		<keys>
			<key type="pk">
				<column name="yun_uid"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>

		</keys>
	</table>
	<table name="h5_yun_login_log" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="用户登陆" group="日志">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="login_time" type="int(11)" nullable="true" default="0" displayName="游戏首次激活时间" displayType="time" queryType="range"/>
			<column name="login_ip" type="varchar(30)" nullable="true" default="" displayName="首次登陆ip" displayType="text" queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0"  displayName="yun uid"  displayType="text" />
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_order" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="充值订单" group="用户">
		<columns>
			<column name="order_id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text"  queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0" displayName="云用户id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise" />
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise" />
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="money" type="int(11)" nullable="true" default="0.00" displayName="充值金额" displayType="text" />
			<column name="coin" type="int(11)" nullable="true" default="0.00" displayName="充值游戏币" displayType="text" />
			<column name="free_coin" type="int(11)" nullable="true" default="0" displayName="赠送游戏币" displayType="text" />
			<column name="pay_time" type="int(11)" nullable="true" default="0" displayName="游戏充值时间" displayType="time" queryType="range"/>
			<column name="pay_ip" type="varchar(30)" nullable="true" default="" displayName="充值ip" displayType="text" />
			<column name="pay_status" type="int(2)" nullable="true" default="0" displayName="支付状态:0创建，1成功，2失败" displayType="text" queryType="precise"/>
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="订单更新时间" displayType="time" queryType="range"/>
			<column name="server_id" type="varchar(100)" nullable="true" default="" displayName="游戏服标记" displayType="text" queryType="precise"/>
			<column name="game_order_id" type="varchar(50)" nullable="true" default="" displayName="游戏订单号" displayType="text" queryType="precise"/>
			<column name="role_name" type="varchar(50)" nullable="true" default="" displayName="游戏角色名" displayType="text" queryType="precise"/>
			<column name="platform_order_id" type="varchar(50)" nullable="true" default="" displayName="平台订单号" displayType="text" queryType="precise"/>
			<column name="game_extra" type="varchar(255)" nullable="true" default="" displayName="游戏额外参数，原样回传游戏" displayType="textarea" />
		</columns>
		<keys>
			<key type="pk">
				<column name="order_id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_platform" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="平台" group="对接配置">
		<columns>
			<column name="platform_id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="platform_name" type="varchar(50)" nullable="false" displayName="平台名称" displayType="text"  queryType="fuzzy"/>
			<column name="platform_url" type="varchar(255)" nullable="true" default="" displayName="平台地址" displayType="textarea" />
			<column name="platform_key" type="varchar(100)" nullable="true" default="" displayName="通信密钥" displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="更新时间" displayType="time" />
			<column name="pay_white_ips" type="varchar(255)" nullable="true" default="" displayName="充值ip白名单:逗号隔开，为空则只能127.0.0.1能访问" displayType="textarea" />
			<column name="operation_state" type="int(2)" nullable="true" default="1" displayName="运营状态:1正常，2下线" displayType="text" queryType="precise"/>
			<column name="is_sign" type="int(1)" nullable="true" default="1" displayName="是否验证签名" displayType="text" />
			<column name="platform_en_name" type="varchar(32)" nullable="true" default="NULL" displayName="平台简称" displayType="text" />
		</columns>
		<keys>
			<key type="pk">
				<column name="platform_id"/>
			</key>
		</keys>
	</table>
	<table name="h5_yun_share_log" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="分享日志" group="日志">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0"  displayName="yun uid"  displayType="text" />
			<column name="share_title" type="varchar(255)" nullable="true" default="" displayName="分享标题" displayType="text" queryType="precise"/>
			<column name="share_desc" type="varchar(255)" nullable="true" default="" displayName="分享描述" displayType="text"/>
			<column name="share_path" type="varchar(255)" nullable="true" default="" displayName="分享路径" displayType="text" />
			<column name="share_img" type="varchar(255)" nullable="true" default="" displayName="分享图片地址" displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="分享时间" displayType="time" queryType="range"/>
			<column name="share_ip" type="varchar(30)" nullable="true" default="" displayName="分享ip" displayType="text" queryType="precise"/>
			<column name="share_brand" type="varchar(255)" nullable="true" default="" displayName="手机品牌" displayType="text" />
			<column name="share_model" type="varchar(255)" nullable="true" default="" displayName="手机型号" displayType="text" />
			<column name="share_version" type="varchar(255)" nullable="true" default="" displayName="微信版本号" displayType="text" />
			<column name="share_system" type="varchar(255)" nullable="true" default="" displayName="手机系统版本号" displayType="text" />
			<column name="share_platform" type="varchar(255)" nullable="true" default="" displayName="客户端平台" displayType="text" />
			<column name="share_network" type="varchar(255)" nullable="true" default="" displayName="网络类型" displayType="text" />
			<column name="share_scene" type="varchar(255)" nullable="true" default="" displayName="分享场景" displayType="text" />
			<column name="share_sdk_version" type="varchar(20)" nullable="true" default="" displayName="sdk版本号" displayType="text" />
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_user" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="注册用户" group="用户">
		<columns>
			<column name="yun_uid" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise" />
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="平台用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="平台用户名" displayType="text" queryType="precise"/>
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
		</columns>
		<keys>
			<key type="pk">
				<column name="yun_uid"/>
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_user_ad" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="看广告记录" group="日志">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="平台用户id" displayType="text" queryType="precise"/>
			<column name="watch_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" />
			<column name="is_ended" type="int(11)" nullable="true" default="0" displayName="观看是否完整:0不完整,1完整,2banner广告" displayType="text" />
			<column name="ad_type" type="int(11)" nullable="true" default="0" displayName="广告类型：1是banner，2是video" displayType="text" queryType="precise" />
			<column name="ad_unit" type="varchar(255)" nullable="true" default="" displayName="广告ID" displayType="text" queryType="precise"/>
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_user_log" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="用户操作日志" group="日志">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0"  displayName="yun uid"  displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" queryType="range"/>
			<column name="ip" type="varchar(30)" nullable="true" default="" displayName="ip" displayType="text" queryType="precise"/>
			<column name="op_type" type="int(2)" nullable="true" default="0" displayName="操作类型，0选择区服，1创角" displayType="text" queryType="precise" />
			<column name="role_id" type="varchar(255)" nullable="true" default="" displayName="角色id" displayType="text" queryType="precise"/>
			<column name="role_level" type="varchar(255)" nullable="true" default="" displayName="角色等级" displayType="text" />
			<column name="role_name" type="varchar(255)" nullable="true" default="" displayName="角色名" displayType="text" queryType="precise"/>
			<column name="server_id" type="varchar(255)" nullable="true" default="" displayName="服id" displayType="text" queryType="precise"/>
			<column name="server_name" type="varchar(255)" nullable="true" default="" displayName="服名" displayType="text" queryType="precise"/>
			<column name="reg_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" queryType="range"/>
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>

	<table name="h5_yun_user_log" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="用户操作日志" group="日志">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0"  displayName="yun uid"  displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" queryType="range"/>
			<column name="ip" type="varchar(30)" nullable="true" default="" displayName="ip" displayType="text" queryType="precise"/>
			<column name="op_type" type="int(2)" nullable="true" default="0" displayName="操作类型，0选择区服，1创角" displayType="text" queryType="precise" />
			<column name="role_id" type="varchar(255)" nullable="true" default="" displayName="角色id" displayType="text" queryType="precise"/>
			<column name="role_level" type="varchar(255)" nullable="true" default="" displayName="角色等级" displayType="text" />
			<column name="role_name" type="varchar(255)" nullable="true" default="" displayName="角色名" displayType="text" queryType="precise"/>
			<column name="server_id" type="varchar(255)" nullable="true" default="" displayName="服id" displayType="text" queryType="precise"/>
			<column name="server_name" type="varchar(255)" nullable="true" default="" displayName="服名" displayType="text" queryType="precise"/>
			<column name="reg_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" queryType="range"/>
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>
	<table name="h5_yun_xcx_user_session" engine="InnoDB" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" comment="微信小游戏用户" group="用户">
		<columns>
			<column name="id" type="int(11)" nullable="false" extra="auto_increment" displayName="自增id" displayType="text" />
			<column name="login_token" type="varchar(255)" nullable="true" default="" displayName="登录态" displayType="text" queryType="precise"/>
			<column name="game_id" type="int(11)" nullable="true" default="0" displayName="游戏id" displayType="select" queryType="precise"/>
			<column name="platform_id" type="int(11)" nullable="true" default="0" displayName="平台id" displayType="select" queryType="precise"/>
			<column name="platform_user_id" type="varchar(50)" nullable="true" default="" displayName="用户id" displayType="text" queryType="precise"/>
			<column name="platform_user_name" type="varchar(100)" nullable="true" default="" displayName="用户名" displayType="text" queryType="precise"/>
			<column name="yun_uid" type="int(11)" nullable="true" default="0"  displayName="yun uid"  displayType="text" />
			<column name="create_time" type="int(11)" nullable="true" default="0" displayName="创建时间" displayType="time" queryType="range"/>
			<column name="update_time" type="int(11)" nullable="true" default="0" displayName="更新时间" displayType="time" />
			<column name="expire_time" type="int(11)" nullable="true" default="0" displayName="过期时间" displayType="time" />
			<column name="session_key" type="varchar(255)" nullable="true" default="" displayName="微信登录态" displayType="text" />
			<column name="open_id" type="varchar(255)" nullable="true" default="" displayName="open_id" displayType="text" queryType="range" />
			<column name="unionid" type="varchar(255)" nullable="true" default="" displayName="unionid" displayType="text" />
			<column name="nick_name" type="varchar(50)" nullable="true" default="" displayName="昵称" displayType="text" />
			<column name="gender" type="varchar(10)" nullable="true" default="" displayName="性别" displayType="text" />
			<column name="city" type="varchar(50)" nullable="true" default="" displayName="城市" displayType="text" />
			<column name="province" type="varchar(50)" nullable="true" default="" displayName="省份" displayType="text" />
			<column name="country" type="varchar(50)" nullable="true" default="" displayName="国家" displayType="text" />
			<column name="avatar_url" type="varchar(255)" nullable="true" default="" displayName="头像" displayType="text" />
			<column name="first_brand" type="varchar(255)" nullable="true" default="" displayName="首次登录品牌" displayType="text" />
			<column name="last_brand" type="varchar(255)" nullable="true" default="" displayName="最后登录品牌" displayType="text" />
			<column name="first_model" type="varchar(255)" nullable="true" default="" displayName="首次登录型号" displayType="text" />
			<column name="last_model" type="varchar(255)" nullable="true" default="" displayName="最后登录型号" displayType="text" />
			<column name="first_version" type="varchar(255)" nullable="true" default="" displayName="首次登录微信版本" displayType="text" />
			<column name="last_version" type="varchar(255)" nullable="true" default="" displayName="最后登录微信版本" displayType="text" />
			<column name="first_system" type="varchar(255)" nullable="true" default="" displayName="首次登录系统版本" displayType="text" />
			<column name="last_system" type="varchar(255)" nullable="true" default="" displayName="最后登录系统版本" displayType="text" />
			<column name="first_platform" type="varchar(255)" nullable="true" default="" displayName="首次登录平台" displayType="text" />
			<column name="last_platform" type="varchar(255)" nullable="true" default="" displayName="最后登录平台" displayType="text" />
			<column name="first_network" type="varchar(255)" nullable="true" default="" displayName="首次登录网络" displayType="text" />
			<column name="last_network" type="varchar(255)" nullable="true" default="" displayName="最后登录网络" displayType="text" />
			<column name="first_scene" type="varchar(255)" nullable="true" default="" displayName="首次登录场景" displayType="text" />
			<column name="last_scene" type="varchar(255)" nullable="true" default="" displayName="最后登录场景" displayType="text" />
			<column name="first_sdk_version" type="varchar(20)" nullable="true" default="" displayName="首次登录sdk" displayType="text" />
			<column name="last_sdk_version" type="varchar(20)" nullable="true" default="" displayName="最后登录sdk" displayType="text" />
			<column name="wx_query" type="varchar(2000)" nullable="true" default="" displayName="来源入口参数" displayType="text" />
			<column name="wx_group_id" type="varchar(255)" nullable="true" default="" displayName="来源群id" displayType="text" />
			<column name="referrer_app_id" type="varchar(255)" nullable="true" default="" displayName="来源app_id" displayType="text" queryType="precise" />
			<column name="referrer_extra" type="varchar(2000)" nullable="true" default="" displayName="来源额外参数" displayType="text" />
			<column name="rank" type="int(11)" nullable="true" default="0" displayName="分享裂变层级" displayType="select"/>
			<column name="inviter" type="varchar(255)" nullable="true" default="" displayName="邀请者" displayType="text" />
			<column name="leader" type="varchar(255)" nullable="true" default="" displayName="第一用户" displayType="text" />
		</columns>
		<keys>
			<key type="pk">
				<column name="id"/>
			</key>
			<key type="fk" name="fk_game_id">
				<column name="game_id"  referencedTable="h5_cp_game" referencedColumn="game_id" />
			</key>
			<key type="fk" name="fk_platform_id">
				<column name="platform_id" referencedTable="h5_yun_platform" referencedColumn="platform_id" />
			</key>
		</keys>
	</table>


	<table name="h5_yun_xcx_matrix" engine="InnoDB" comment="矩阵渠道" charset="utf8" autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false" isDict="true">
        <columns>
            <column name="matrix_id" type="int(10) unsigned" nullable="false" displayName="h5游戏id" displayType="text"/>
            <column name="matrix_name" type="varchar(255)" nullable="false" displayName="矩阵名称" displayType="text"
                    queryType="fuzzy"/>
            <column name="wx_id" type="varchar(32)" nullable="false" displayName="小程序微信AppID" displayType="text"
                    queryType="precise"/>
            <column name="state" type="tinyint(1) unsigned" nullable="false" default="0" displayName="合作状态"
                    displayType="text" queryType="precise"/>
            <column name="jump_num" type="int(10) unsigned" nullable="false" default="0" displayName="跳转游戏数量"
                    displayType="text"/>
            <column name="ad_position_num" type="int(10) unsigned" nullable="false" default="0" displayName="广告位数量"
                    displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="matrix_id"/>
            </key>
            <key type="uk">
                <column name="wx_id"/>
            </key>
        </keys>
    </table>
    <table name="h5_yun_xcx_ad_position" engine="InnoDB" comment="小游戏渠道广告位" charset="utf8" autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false">
        <columns>
            <column name="position_id" type="int(10) unsigned" nullable="false" extra="auto_increment"
                    displayName="广告位id" displayType="text"/>
            <column name="position_sn" type="int(10) unsigned" nullable="false" displayName="广告位序号" displayType="text"/>
            <column name="matrix_id" type="int(10) unsigned" nullable="false" displayName="矩阵id" displayType="select"/>
            <column name="position_name" type="varchar(32)" nullable="false" displayName="广告位名称" displayType="text"/>
            <column name="type" type="tinyint(2) unsigned" nullable="false" default="1"
                    displayName="广告位类型，1：静态icon，2：动态icon，3：静态banner，4：动态banner，5：视频" displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="position_id"/>
            </key>
            <key type="fk" name="fk_ad_matrix">
                <column name="matrix_id" referencedTable="h5_yun_xcx_matrix" referencedColumn="matrix_id"/>
            </key>
        </keys>
    </table>
    <table name="h5_yun_xcx_jump_list" engine="InnoDB" comment="跳转小游戏名单" charset="utf8" autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false" isDict="true">
        <columns>
            <column name="jump_id" type="int(10) unsigned" nullable="false" extra="auto_increment" displayName="跳转id"
                    displayType="text"/>
            <column name="matrix_id" type="int(10) unsigned" nullable="false" displayName="矩阵id" displayType="select"/>
            <column name="jump_version" type="int(5)" nullable="false" displayName="版本" displayType="text"/>
            <column name="jump_matrix_id" type="int(10) unsigned" nullable="false" displayName="跳转矩阵id"
                    displayType="select"/>
            <column name="is_deleted" type="tinyint(1)" nullable="false" default="0" displayName="是否废弃"
                    displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="jump_id"/>
            </key>
            <key type="fk" name="fk_matrix">
                <column name="matrix_id" referencedTable="h5_yun_xcx_matrix" referencedColumn="matrix_id"/>
            </key>
            <key type="fk" name="fk_jump_matrix">
                <column name="jump_matrix_id" referencedTable="h5_yun_xcx_matrix" referencedColumn="matrix_id"/>
            </key>
        </keys>
    </table>
    <table name="h5_yun_xcx_pay_plat_setting" engine="InnoDB" comment="小游戏买量渠道" charset="utf8"
           autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false">
        <columns>
            <column name="setting_id" type="int(10) unsigned" nullable="false" extra="auto_increment"
                    displayName="自增id" displayType="text"/>
            <column name="plat_id" type="int(10)" nullable="false" displayName="渠道id" displayType="text"/>
            <column name="jump_type" type="tinyint(1) unsigned" nullable="false" default="1"
                    displayName="跳转类型，1：一直展示，2：仅直接跳转时不展示" displayType="text"/>
            <column name="jump_limit" type="int(10) unsigned" nullable="false" displayName="跳转数量限制" displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="setting_id"/>
            </key>
        </keys>
    </table>
    <table name="h5_yun_xcx_matrix_ad" engine="InnoDB" comment="小游戏广告管理" charset="utf8"
           autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false" isDict="true">
        <columns>
            <column name="ad_id" type="int(10) unsigned" nullable="false" extra="auto_increment"
                    displayName="自增id" displayType="text"/>
            <column name="ad_name" type="varchar(32)" nullable="false" displayName="广告名称" displayType="text"
                    queryType="fuzzy"/>
            <column name="ad_type" type="tinyint(2) unsigned" nullable="false" default="1"
                    displayName="广告类型，1：静态icon，2：动态icon，3：静态banner，4：动态banner，5：视频" displayType="text"/>
            <column name="ad_put_matrix" type="int(10)" nullable="false" displayName="广告投放位置：游戏" displayType="select"/>
            <column name="ad_put_position" type="int(10)" nullable="false" displayName="广告投放位置：广告位序号（广告位名称）"
                    displayType="text"/>
            <column name="ad_spread_version" type="int(5)" nullable="false" displayName="广告推广游戏：版本" displayType="text"/>
            <column name="ad_spread_matrix" type="int(10)" nullable="false" displayName="广告推广跳转游戏"
                    displayType="select"/>
            <column name="ad_content" type="varchar(255)" nullable="false" displayName="广告内容" displayType="text"
                    queryType="fuzzy"/>
            <column name="ad_put_day_from" type="varchar(32)" nullable="false" displayName="广告投放开始日期"
                    displayType="text"/>
            <column name="ad_put_day_to" type="varchar(32)" nullable="false" displayName="广告投放结束日期" displayType="text"/>
            <column name="ad_put_hour_from" type="varchar(32)" nullable="false" displayName="广告投放日中开始时间"
                    displayType="text"/>
            <column name="ad_put_hour_to" type="varchar(32)" nullable="false" displayName="广告投放日中结束时间"
                    displayType="text"/>
            <column name="ad_put_gender" type="tinyint(1) unsigned" nullable="false" default="0"
                    displayName="广告投放性别，0：全部，1：男，2：女" displayType="text"/>
            <column name="ad_put_os" type="tinyint(1) unsigned" nullable="false" default="0"
                    displayName="广告投放操作系统，0：全部，1：Android，2：IOS" displayType="text"/>
            <column name="ad_put_custom" type="tinyint(2) unsigned" nullable="false" default="0"
                    displayName="广告投放自定义人群,默认0不开启,其余为人群1-10" displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="ad_id"/>
            </key>
            <key type="fk" name="fk_put_matrix">
                <column name="ad_put_matrix" referencedTable="h5_yun_xcx_matrix" referencedColumn="matrix_id"/>
            </key>
            <key type="fk" name="fk_ad_spread_matrix">
                <column name="ad_spread_matrix" referencedTable="h5_yun_xcx_jump_list"
                        referencedColumn="jump_matrix_id"/>
            </key>
        </keys>
    </table>
    <table name="h5_yun_xcx_ad_put_plat" engine="InnoDB" comment="小游戏广告投放渠道" charset="utf8"
           autoIncrementStartFrom="1"
           enableUpdateTracking="false" enableLogicalDeletion="true" enableCache="false">
        <columns>
            <column name="id" type="int(10) unsigned" nullable="false" extra="auto_increment"
                    displayName="自增id" displayType="text"/>
            <column name="ad_id" type="int(10)" nullable="false" displayName="广告id" displayType="text"/>
            <column name="plat_id" type="int(10)" nullable="false" displayName="渠道id" displayType="text"/>
        </columns>
        <keys>
            <key type="pk">
                <column name="id"/>
            </key>
            <key type="fk" name="fk_ad">
                <column name="ad_id" referencedTable="h5_yun_xcx_matrix_ad" referencedColumn="ad_id"/>
            </key>
        </keys>
    </table>


	<!--权限管理开始//-->
	<table name="power_user"  engine="InnoDB" comment="用户管理" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" group="权限管理">
		<columns>
			<column name="power_user_id"  type="int(10) unsigned" nullable="false" extra="auto_increment" displayName="ID编号"/>
			<column name="power_user_name"  type="char(30)" nullable="false" displayName="用户帐号" displayType="text" queryType="fuzzy"/>
			<column name="truename" type="char(30)" nullable="false" displayName="真实姓名" displayType="text"/>
			<column name="password" type="char(32)" nullable="false" displayName="密码" displayType="text"/>
			<column name="power_role_id" type="int(10)"  displayName="角色类型" displayType="select" />
			<column name="is_root"  type="boolean" displayName="是否超管：0否，1是" default="0" displayType="radio"  queryType="precise" version="1.1"/>
			<column name="is_admin"  type="boolean" displayName="是否普管：0否，1是" default="0" displayType="radio"  queryType="precise" version="1.1"/>
			<column name="last_login_time" type="int(10) unsigned" nullable="true" displayName="最后登陆时间" displayType="time"/>
			<column name="login_count" type="int(10) unsigned" nullable="true" default="0" displayName="登陆次数" displayType="text"/>
			<column name="created_time" type="int(10) unsigned" nullable="true" displayName="创建时间" displayType="time" track="create"/>
			<column name="updated_time" type="int(10) unsigned" nullable="true" displayName="更新时间" displayType="time" track="update"/>
		</columns>
		<keys>
			<key type="pk">
				<column name="power_user_id"/>
			</key>
			<key type="ak">
				<column name="power_user_name"/>
			</key>
			<key type="fk" name="fk_user_role">
				<column name="power_role_id" referencedTable="power_role" referencedColumn="power_role_id"/>
			</key>
		</keys>
		<init_data>
			
		</init_data>
	</table>
	
	<table name="power_role"  engine="InnoDB" comment="角色管理" charset="utf8" autoIncrementStartFrom="1" enableCache="false" isDict="true" group="权限管理">
		<columns>
			<column name="power_role_id"  type="int(10) unsigned" nullable="false" extra="auto_increment" displayName="ID编号"/>
			<column name="power_role_name"  type="char(30)" nullable="false" displayName="角色名称" displayType="text"/>
			<column name="content" type="text" nullable="true" displayName="角色权限内容" displayType="privilege"/>
			<column name="created_time" type="int(10) unsigned" nullable="true" displayName="创建时间" displayType="time" track="create"/>
		</columns>
		<keys>
			<key type="pk">
				<column name="power_role_id"/>
			</key>		
		</keys>
	</table>

</database>
